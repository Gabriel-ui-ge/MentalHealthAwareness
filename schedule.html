<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Minimal Calendar</title>

<style>
:root {
  --border: #e5e5e5;
  --accent: #3b82f6;
  font-family: system-ui, sans-serif;
}

body {
  margin: 0;
  background: #fafafa;
}

header {
  padding: 16px;
  font-weight: 600;
  font-size: 1.1rem;
}

.calendar {
  display: grid;
  grid-template-columns: 60px 1fr;
  height: calc(100vh - 60px);
  overflow-y: auto;
  position: relative;
}

.time {
  border-top: 1px solid var(--border);
  padding: 4px;
  font-size: 0.75rem;
  text-align: right;
}

.slot {
  border-top: 1px solid var(--border);
}

.event {
  position: absolute;
  left: 4px;
  right: 4px;
  background: var(--accent);
  color: white;
  padding: 4px 6px;
  border-radius: 4px;
  font-size: 0.75rem;
  cursor: pointer;
}

#now {
  position: absolute;
  left: 0;
  right: 0;
  height: 2px;
  background: red;
}
</style>
</head>

<body>

<header id="date"></header>
<div class="calendar" id="calendar"></div>

<script>
/* ---------- CONFIG ---------- */
const START = 6, END = 23;
const events = [];
const cal = document.getElementById('calendar');
const $ = q => document.querySelector(q);
const px = (h, m = 0) => ((h - START) * 60 + m);

/* ---------- DATE ---------- */
document.getElementById('date').textContent =
  new Date().toLocaleDateString(undefined, {
    weekday: 'long', month: 'long', day: 'numeric'
  });

/* ---------- BUILD GRID ---------- */
for (let h = START; h < END; h++) {
  cal.innerHTML += `
    <div class="time">${format(h)}</div>
    <div class="slot" data-hour="${h}"></div>
  `;
}

/* ---------- ADD EVENT ---------- */
cal.onclick = e => {
  const slot = e.target.closest('.slot');
  if (!slot) return;

  const h = +slot.dataset.hour;
  const title = prompt('Event title?');
  if (!title) return;

  events.push({ id: Date.now(), title, start: h, end: h + 1 });
  render();
};

/* ---------- RENDER EVENTS ---------- */
function render() {
  document.querySelectorAll('.event').forEach(e => e.remove());

  events.forEach(ev => {
    const el = document.createElement('div');
    el.className = 'event';
    el.textContent = ev.title;
    el.style.top = px(ev.start) + 'px';
    el.style.height = (ev.end - ev.start) * 60 + 'px';

    el.onclick = e => {
      e.stopPropagation();
      const t = prompt('Edit title', ev.title);
      if (t !== null) ev.title = t;
      render();
    };

    el.ondblclick = e => {
      e.stopPropagation();
      events.splice(events.indexOf(ev), 1);
      render();
    };

    cal.appendChild(el);
  });

  drawNow();
}

/* ---------- CURRENT TIME ---------- */
function drawNow() {
  let line = $('#now');
  if (!line) {
    line = document.createElement('div');
    line.id = 'now';
    cal.appendChild(line);
  }

  const d = new Date();
  const h = d.getHours(), m = d.getMinutes();
  if (h < START || h >= END) return line.style.display = 'none';

  line.style.top = px(h, m) + 'px';
  line.style.display = 'block';
}

setInterval(drawNow, 60000);
drawNow();

/* ---------- TIME FORMAT ---------- */
function format(h) {
  return h === 12 ? '12 PM' : h > 12 ? h - 12 + ' PM' : h + ' AM';
}
</script>

</body>
</html>

